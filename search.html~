<!DOCTYPE html> 
<html> 
<head> 
	<title>Customer Search</title> 
	<meta name="viewport" content="width=device-width, initial-scale=1"> 
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
	<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
	<script src="http://underscorejs.org/underscore-min.js"></script>
</head> 

<body> 

<div data-role="page" data-theme="c" data-add-back-btn="true">

<script src="/include.js"></script>
<script type="text/javascript">
<<<<<<< HEAD
=======

>>>>>>> 336739caee1a6064d6ddbfeab841b7df2b4c3857

        
       //alert(customerList.length);
       var customerList = new Array();

      connect();
       socket.on('retreiveCustomerListFromDB', function(custlist){
        
      if (!_.isEmpty(custlist)){
	    _.uniq(custlist);
	    displayListOfCustomers(custlist);
	}
	
	});
	

	
	 var myArr = new Array();
 function displayListOfCustomers(custlist){
      custlist.sort(); //sort array alphabeticall      
     // for (var cust in custlist[0]){
     
     $('#searchlist').html("");
    myArr =   $.unique(custlist);
   
    for (var i=0;i<myArr.length;i++){
	$('#searchlist').append("<li class='customer' id=\""+'cust' + myArr[i].empID + "\"><a onClick=\"sendIdToCustomerPage("+myArr[i].empID+")\" href=\"#\">" + myArr[i].firstName + " " + myArr[i].lastName +"</a></li>").listview('refresh');
     }
   
    }
  
    function sendIdToCustomerPage(ID) {
	  socket.emit("setCustomerID", ID);
	  $.mobile.changePage( "/customer.html", {
	    role: "page",
	    type: "get",
	    data:{ID:ID},
	    transition: "slide"
	  });
	}

</script>
	<div data-role="header" data-position="fixed"  data-add-back-btn="true"  att>
		<h1>Customer Search</h1>
	</div><!-- /header -->

	<div data-role="content">	
		<ul id="searchlist" data-role="listview" data-inset="false" data-filter="true" >
			
		</ul>

	</div><!-- /content -->
		<!--Footer-->
		<div data-role="footer" data-position="fixed">		
			<div data-role="navbar">
				<ul>
					<li><a href="index.html" data-icon="home" data-iconpos="bottom" data-transition="pop">Home</a></li>
					
				</ul>
			</div><!-- /navbar -->
		</div><!-- /footer -->
</div><!-- /page -->

</body>
</html>